# Prompt Playbook for Vibe Coding

## 目的
AIコーディング時のブレを減らし、要件逸脱を防ぐ。

## ルール
- 変更前に対象ファイルと目的を明示
- API契約を先に固定してからUIを実装
- 1PR1目的で小さく進める
- 受け入れ基準を満たすテストを同時に追加

## Prompt Templates

### 1) 機能実装
```
Next.js 16 + TypeScript + App Router前提です。
以下仕様を満たす実装を行ってください。
- 対象: <feature>
- 入出力: <contract>
- 受け入れ基準: <criteria>
- 変更対象: <files>
既存仕様を壊さないよう最小変更で実装し、最後にテスト結果を報告してください。
```

### 2) リファクタ
```
機能は変えずに、可読性と保守性を改善してください。
- 対象モジュール: <module>
- 目標: <goal>
- 制約: 公開API互換を維持
変更点の要約、リスク、追加テストを提示してください。
```

### 3) バグ修正
```
再現条件:
<steps>
期待結果:
<expected>
実際結果:
<actual>
原因候補を3つ出し、最短で安全な修正案を適用してください。
修正後に回帰テストも追加してください。
```

### 4) 数式検証
```
以下の指標計算実装が定義式と一致しているかレビューしてください。
- 指標: <indicator>
- 実装: <file>
- 参照式: <formula>
誤差許容範囲とテストケースを提示してください。
```

## Definition of Done
- 仕様の受け入れ基準を満たす
- テスト追加/更新済み
- エラー時UIが破綻しない
- 免責文表示を維持
